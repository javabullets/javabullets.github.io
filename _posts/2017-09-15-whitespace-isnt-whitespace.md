---
id: 2534
title: 'When a blank isnt blank'
date: '2017-09-15T14:28:37+00:00'
author: 'Martin Farrell'
layout: post
guid: 'https://www.javabullets.com/?p=2534'
permalink: /whitespace-isnt-whitespace/
thrive_post_fonts:
    - '[]'
image: /wp-content/uploads/2017/09/rab-fyfe-84787.jpg
categories:
    - Apache
    - Java
tags:
    - gotchas
    - java
---

I had a funny one this week when I needed to generate an error message when users entered a string of blank spaces. I’ve previously blogged on using utility classes under [Why do we still create Util classes?](https://www.javabullets.com/why-do-we-still-create-util-classes/), so my first port of call was to use [StringUtil.isBlank](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#isBlank-java.lang.CharSequence-). But it didnt catch my blank- so I had a case of blank not being a blank

Of course the answer was simple and the whitespace was a [No-Break Space(U+00A0)](http://www.fileformat.info/info/unicode/char/00a0/index.htm) and was generated by a transformation between my instance of CKEditor in the browser and the validation layer.

Now if we look at the [StringUtils.isBlank](https://commons.apache.org/proper/commons-lang/apidocs/src-html/org/apache/commons/lang3/StringUtils.html#line.335) method –

```
<pre class="lang:java" theme:eclipse="" title="StringUtils.isBlank">
public static boolean isBlank(final CharSequence cs) {
   int strLen;
   if (cs == null || (strLen = cs.length()) == 0) {
      return true;
   }
   for (int i = 0; i < strLen; i++) {
      if (!Character.isWhitespace(cs.charAt(i))) {
         return false;
      }
   }
   return true;
}
```

We see it ultimately delegates to [Character.isWhitespace](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isWhitespace(char)), and if we look at the documentation we clearly see that it doesnt detect non-breaking space – ‘\\u00A0’, ‘\\u2007’, ‘\\u202F’

- It is a Unicode space character (SPACE\_SEPARATOR, LINE\_SEPARATOR, or PARAGRAPH\_SEPARATOR) but is not also a non-breaking space (‘\\u00A0’, ‘\\u2007’, ‘\\u202F’).
- It is ‘\\t’, U+0009 HORIZONTAL TABULATION.
- It is ‘\\n’, U+000A LINE FEED.
- It is ‘\\u000B’, U+000B VERTICAL TABULATION.
- It is ‘\\f’, U+000C FORM FEED.
- It is ‘\\r’, U+000D CARRIAGE RETURN.
- It is ‘\\u001C’, U+001C FILE SEPARATOR.
- It is ‘\\u001D’, U+001D GROUP SEPARATOR.
- It is ‘\\u001E’, U+001E RECORD SEPARATOR.
- It is ‘\\u001F’, U+001F UNIT SEPARATOR.

So for me the moral is to keep using util classes – but occasionally RTFM

Incidently it was caught in the unit testing – so all was well!